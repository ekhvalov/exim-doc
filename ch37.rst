
.. _ch37_00:

Аутентификатор **dovecot**
==========================

Этот аутентификатор - интерфейс к аутентификационному средству Dovecot POP/IMAP сервера, который может поддерживать множество аутентификационных методов.

Если вы используете Dovecot для аутентифкации POP/IMAP клиентов, он может быть полезен для использования того же самого механизма для SMTP аутентификации. Это только серверный аутентификатор. У него только один параметр:

.. index::
   pair: dovecot; server_socket

=================  ============  ============  ==============
**server_socket**  Use: dovecot  Type: string  Default: unset
=================  ============  ============  ==============

Этот параметр должен определять сокет, являющийся интерфейсом к аутентификации в Dovecot. Параметр **public_name** должна определять аутентификационный механизм, поддержка которого сконфигурирована в Dovecot. У вас может быть несколько разных аутентификаторов для различных механизмов. Например::

  dovecot_plain:
    driver = dovecot
    public_name = PLAIN
    server_socket = /var/run/dovecot/auth-client
    server_set_id = $auth2

  dovecot_ntlm:
    driver = dovecot
    public_name = NTLM
    server_socket = /var/run/dovecot/auth-client
    server_set_id = $auth1

Если SMTP соединение зашифровано, или если $sender_host_address эквивалентна $received_ip_address (т.е. соединение локальное), параметр **secured** передаётся в команду аутентификации Dovecot. Для TLS соединения, если клиентский сертификат проверен, передаётся параметр **valid-client-cert**. Когда аутентификация успешна, идентификатор аутентифицированного пользователя помещается в $auth1.
